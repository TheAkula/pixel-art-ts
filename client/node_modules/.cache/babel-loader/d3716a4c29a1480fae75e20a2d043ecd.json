{"ast":null,"code":"import _slicedToArray from\"C:/Users/Pechenka/pixel-app-ts/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _toConsumableArray from\"C:/Users/Pechenka/pixel-app-ts/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"C:/Users/Pechenka/pixel-app-ts/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useReducer}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";var initialState={arts:[],chosen:null};export var ArtsContext=/*#__PURE__*/React.createContext(null);var reducer=function reducer(state,action){switch(action.type){case\"ADD_ART\":return _objectSpread(_objectSpread({},state),{},{arts:[].concat(_toConsumableArray(state.arts),[action.data])});case\"ADD_ROW\":var newArts=JSON.parse(JSON.stringify(state.arts));newArts.forEach(function(art){art.rows.push(action.data);});return _objectSpread(_objectSpread({},state),{},{arts:newArts});case\"DEL_ROW\":var arts=JSON.parse(JSON.stringify(state.arts));if(arts[0].rows.length===1)return _objectSpread(_objectSpread({},state),{},{arts:state.arts});arts.forEach(function(art){art.rows.pop();});return _objectSpread(_objectSpread({},state),{},{arts:arts});case\"ADD_COL\":var arts1=JSON.parse(JSON.stringify(state.arts));arts1.forEach(function(art){art.rows.forEach(function(row,id){row.push({xpos:action.data.x,ypos:id,color:action.data.color});});});return _objectSpread(_objectSpread({},state),{},{arts:arts1});case\"DEL_COL\":var arts2=JSON.parse(JSON.stringify(state.arts));if(arts2[0].rows[0].length===1)return _objectSpread(_objectSpread({},state),{},{arts:state.arts});arts2.forEach(function(art){art.rows.forEach(function(row){row.pop();});});return _objectSpread(_objectSpread({},state),{},{arts:arts2});case\"SET_CHOSEN\":return _objectSpread(_objectSpread({},state),{},{chosen:action.data});case\"SET_PIX\":var arts3=JSON.parse(JSON.stringify(state.arts));var _a=arts3.find(function(art){return art.id===action.artId;});arts3[arts3.indexOf(_a)].rows[action.y][action.x].color=action.data;return _objectSpread(_objectSpread({},state),{},{arts:arts3});case\"UPD_ART\":var updatedArts=JSON.parse(JSON.stringify(state.arts));var art=updatedArts.find(function(art){return art.id===action.artId;});updatedArts[updatedArts.indexOf(art)]=action.data;return{arts:updatedArts,chosen:state.chosen};default:throw new Error(\"Uncaught type: \"+action.type);}};var ArtsContextProvider=function ArtsContextProvider(props){var _useReducer=useReducer(reducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];return/*#__PURE__*/_jsx(ArtsContext.Provider,{value:{arts:state,artsDispatch:dispatch},children:props.children});};export default ArtsContextProvider;","map":{"version":3,"sources":["C:/Users/Pechenka/pixel-app-ts/src/context/arts-context.tsx"],"names":["React","useReducer","initialState","arts","chosen","ArtsContext","createContext","reducer","state","action","type","data","newArts","JSON","parse","stringify","forEach","art","rows","push","length","pop","arts1","row","id","xpos","x","ypos","color","arts2","arts3","a","find","artId","indexOf","y","updatedArts","Error","ArtsContextProvider","props","dispatch","artsDispatch","children"],"mappings":"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","sourcesContent":["import React, { useReducer } from \"react\";\r\n\r\ninterface Pixel {\r\n  xpos: number;\r\n  ypos: number;\r\n  color: string;\r\n}\r\n\r\nexport interface Art {\r\n  rows: Pixel[][];\r\n  id: string;\r\n}\r\n\r\ninterface ArtsReducerState {\r\n  arts: Art[];\r\n  chosen: string | null;\r\n}\r\n\r\ninterface ArtsReducerAction {\r\n  type: string;\r\n  data?: any;\r\n  artId?: string;\r\n  x?: number;\r\n  y?: number;\r\n}\r\n\r\ninterface ArtsProviderValue {\r\n  arts: ArtsReducerState;\r\n  artsDispatch: React.Dispatch<ArtsReducerAction>;\r\n}\r\n\r\nconst initialState: ArtsReducerState = {\r\n  arts: [],\r\n  chosen: null,\r\n};\r\n\r\nexport const ArtsContext = React.createContext<ArtsProviderValue | null>(null);\r\n\r\ninterface ArtsReducer {\r\n  (a: ArtsReducerState, b: ArtsReducerAction): ArtsReducerState;\r\n}\r\n\r\nconst reducer: ArtsReducer = (state, action) => {\r\n  switch (action.type) {\r\n    case \"ADD_ART\":\r\n      return {\r\n        ...state,\r\n        arts: [...state.arts!, action.data],\r\n      };\r\n    case \"ADD_ROW\":\r\n      const newArts = JSON.parse(JSON.stringify(state.arts)) as Art[];\r\n      newArts.forEach((art) => {\r\n        art.rows.push(action.data);\r\n      });\r\n      return {\r\n        ...state,\r\n        arts: newArts,\r\n      };\r\n    case \"DEL_ROW\":\r\n      const arts = JSON.parse(JSON.stringify(state.arts)) as Art[];\r\n      if (arts[0].rows.length === 1) return { ...state, arts: state.arts };\r\n      arts.forEach((art) => {\r\n        art.rows.pop();\r\n      });\r\n      return {\r\n        ...state,\r\n        arts: arts,\r\n      };\r\n    case \"ADD_COL\":\r\n      const arts1 = JSON.parse(JSON.stringify(state.arts)) as Art[];\r\n      arts1.forEach((art) => {\r\n        art.rows.forEach((row, id) => {\r\n          row.push({ xpos: action.data.x, ypos: id, color: action.data.color });\r\n        });\r\n      });\r\n      return {\r\n        ...state,\r\n        arts: arts1,\r\n      };\r\n    case \"DEL_COL\":\r\n      const arts2 = JSON.parse(JSON.stringify(state.arts)) as Art[];\r\n      if (arts2[0].rows[0].length === 1) return { ...state, arts: state.arts };\r\n      arts2.forEach((art) => {\r\n        art.rows.forEach((row) => {\r\n          row.pop();\r\n        });\r\n      });\r\n      return {\r\n        ...state,\r\n        arts: arts2,\r\n      };\r\n    case \"SET_CHOSEN\":\r\n      return {\r\n        ...state,\r\n        chosen: action.data,\r\n      };\r\n    case \"SET_PIX\":\r\n      let arts3 = JSON.parse(JSON.stringify(state.arts)) as Art[];\r\n      const a = arts3.find((art) => art.id === action.artId)!;\r\n      arts3[arts3.indexOf(a)].rows[action.y!][action.x!].color = action.data;\r\n      return {\r\n        ...state,\r\n        arts: arts3,\r\n      };\r\n    case \"UPD_ART\":\r\n      const updatedArts = JSON.parse(JSON.stringify(state.arts)) as Art[];\r\n      let art = updatedArts.find((art) => art.id === action.artId)!;\r\n      updatedArts[updatedArts.indexOf(art)] = action.data;\r\n      return {\r\n        arts: updatedArts,\r\n        chosen: state.chosen,\r\n      };\r\n    default:\r\n      throw new Error(\"Uncaught type: \" + action.type);\r\n  }\r\n};\r\n\r\nconst ArtsContextProvider = (props: any) => {\r\n  const [state, dispatch] = useReducer(reducer, initialState);\r\n  return (\r\n    <ArtsContext.Provider value={{ arts: state, artsDispatch: dispatch }}>\r\n      {props.children}\r\n    </ArtsContext.Provider>\r\n  );\r\n};\r\n\r\nexport default ArtsContextProvider;\r\n"]},"metadata":{},"sourceType":"module"}